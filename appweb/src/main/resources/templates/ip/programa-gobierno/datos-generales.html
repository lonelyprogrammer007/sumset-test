<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<div class="col-lg-12 col-md-12">
	<div class="form-group">
		<div class="texto">
			<label for="periodo">Temática</label>
		</div>
		<input class="form-control" name="descripcion" id="tematicaEspe"
			type="text" disabled="disabled" >
	</div>
</div>
<div class="col-lg-12 col-md-15">
	<div class="form-group">
		<div class="texto">
			<label for="periodo">Compromiso estratégico</label>
		</div>
		<input class="form-control" name="descripcion" id="compromiso"
			type="text" disabled="disabled">
		<input type="hidden" id="idEstra">	
	</div>
</div>
<div class="col-lg-12 col-md-15">
	<div class="form-group">
		<div class="texto">
			<label for="periodo">Compromisos específicos</label>
		</div>
	</div>
	<button type="button" class="boton-agregar" onclick="crearCompromisoEspecifico();" id="btnAgregarEspecifico">
			<img src="css/img/icono-agregar.png" class="agregar" alt="Icono agregar">Agregar
	</button>
	<br> <br>
	<div class="table-responsive">
		<table id="dtablaEspecifico" class="table-striped" style="width: 175%">
			<thead>
				<tr class="color">
					<th style="width: 40%" class="color-head">Compromisos específicos<br></th>
					<th style="width: 5%" class="color-head">Acción</th>
				</tr>
			</thead>
			<tbody>
				
				
			</tbody>
		</table>
	</div>
	
	<br>
	<form id="meta" th:action="@{consultar-metas}" method="post">
	<input type="hidden" id="metaConcatenada" name="stringEspecifico">
	<div align="right">
			<button type="button" onclick="pasarAMetas()"
					class="boton-regresar">
					<img src="css/img/continuar-over.png" class="volver" alt="Icono agregar">&nbsp;&nbsp;Seguir
			</button>
		</div>
		</form>
</div>
	<div th:include="ip/programa-gobierno/modal-agregar-compromiso-esp.html"></div>
	<div th:include="ip/programa-gobierno/modal-editar-compromiso-esp.html"></div>
<script th:inline="javascript">
$(document).ready(function() {
	
	
	/*<![CDATA[*/
		 var compromisos = /*[[${compromisoEspecifico}]]*/;
		 var mensajeEspecifico = /*[[${messageEspecifico}]]*/;
		 var radioSeleccion =  /*[[${radioSeleccionado}]]*/;
	     var tematica ="";
	     var estrategico ="";
	     var idCompromisoEspe ="";
	     var idEstrategico = "";
	   
	     if (compromisos != null){
	     for (var i = 0; i < compromisos.length; i++) {
	    	 tematica = compromisos[i].nombreTematica; 
	    	 estrategico = compromisos[i].nombreCompromisoEstrategico;
	    	 idEstrategico = compromisos[i].idCompromisoEstrategico
	    	 idCompromisoEspe = compromisos[i].idCompromiso; 
	    	 idEspecifico = compromisos[i].idEspecifico;
	    	 
	     }
         
	     
	 	 
	     document.getElementById("compromisoId").value = radioSeleccion;
	     document.getElementById("compromisoIdEditar").value = idCompromisoEspe;
	     document.getElementById("compromiso").value = estrategico;
	     document.getElementById("idEstra").value = idEstrategico;
	     var id = document.getElementById("compromiso").value;
	     console.log(radioSeleccion);
	     
	 	if(radioSeleccion!=''){
	 		cargarEspecifico(radioSeleccion);
	 	}
	     
	 }
	     if (mensajeEspecifico != null){
	    	 Swal.fire({
			        title:"¡Información!",
				    text: mensajeEspecifico,
			        icon: "warning",
			        confirmButtonText: 'Aceptar',
			        allowOutsideClick: () => false
		   })

//           Swal.fire(
//   'Good job!',
//   'You clicked the button!',
//   'success'
// )
	     }
	     if (radioSeleccion != null){	
				$("#"+radioSeleccion).prop("checked", true);
		 }
	 
	 /*]]>*/
	   
	
});

function editarCompromisoEspecifico(descripcion,idEspecifico){
	$('#modalEditarEspecifico').modal('show');
	 document.getElementById("descripcionEspecifico").value = descripcion;
	 document.getElementById("compromisoIdEspecificoEditar").value = idEspecifico;
	 
}
function eliminarCompromisoEspecifico(idEspecifico){
	Swal.fire({
		  title: '¡Advertencia!',
		  text: "¿Está seguro de eliminar este compromiso específico?",
		  icon: 'warning',
		  showCancelButton: true,
		  confirmButtonColor: '#3085d6',
		  cancelButtonColor: '#d33',
		  confirmButtonText: 'Aceptar',
		  cancelButtonText: 'Cancelar'
		}).then((result) => {
		  if (result.value) {
			window.location = "eliminar-especifico/" + idEspecifico;  
		  
		  }
		})
}
function crearCompromisoEspecifico(){
	$('#modalAgregarEspecifico').modal('show');
}
function cargarEspecifico(id){
		console.log(id);
	    var table  =  $('#dtablaEspecifico').DataTable({
	    	"orderCellsTop": true,
	    	"order": [ 0, 'desc' ],
	    	"columnDefs": [
	    	    { "orderable": false, "targets":1}
	    	  ],
	    	  "responsive" : true,
				"colReorder" : true,
				"processing" : true,
				"serverSide" : true,
				"lengthChange" : true,
				"searching" : true,
				"ordering" : true,
				"info" : true,
				"autoWidth" : true,
	        "language": {
	            "info": '<div class="formato">_END_ de _TOTAL_ registros</div>',
	            "infoEmpty": '<div class="formato">0 de 0.</div>',
	            "infoFiltered": "(filtrados de un total de _MAX_ registros)",
	            "zeroRecords": "No se han encontrado coincidencias.",
	            "responsive": true,
	            "paginate": {
	                "first": '<img src="css/img/icono-flecha-doble-izquierda.png" class="flecha-paginador">',
	                "last":  '<img src="css/img/icono-flecha-doble-derecha.png" class="flecha-paginador">',
	                "next": '<img src="css/img/icono-flecha-derecha.png" class="flecha-paginador">',
	                "previous":'<img src="css/img/icono-flecha-izquierda.png" class="flecha-paginador">'
	            },
	            "lengthMenu": "_MENU_",
	        },

	        "lengthMenu": [5, 10, 20, 50, 100],
	        "pageLength": 5,
	        "pagingType": "full_numbers",
	        "dom": "<'row'<'col-sm-5 col-md-7'>>" +
	                "<'row'<'col-sm-8 col-md-7'tr>>" +
	                "<'row'<'col-sm-8 col-md-7'><'col-sm-2 col-md-1'l><'col-sm-1 col-md-1'i><'col-sm-1 col-md-3'p>>",
	                "order" : [ 0, 'desc' ],
					"ajax" : {
						"url" : "/Segplan/listarCompromisoEspecificoPorId/"+id,
						"type" : "POST"
					},
					"columns" : [
						{
							data : "descripcion"
						},
						{
							"render" : function() {
								return '<button  type="button" id="BtnEditar" class="edit"><img src="css/img/icono-1-azul.png" class="editar"></button><button  type="button" id="BtnEliminar" class="edit"><img src="css/img/icono-eliminar.png" class="editar">'
														
							}, "orderable": false,  className:"icon"}
						],

	    });
	      yadcf.init(table, [ {
	    		column_number : 0,
	    		filter_type : "text",
	    		filter_reset_button_text : false,
	    		filter_delay : 500

	    	},]);
	 $('div.dataTables_length select').addClass("formato-2");
}
function pasarAMetas(){

// 	var $tabButtonItem = $('#tab-button li'), $tabSelect = $('#tab-select'), $tabContents = $('.tab-contents'), activeClass = 'is-active';
// 	$tabButtonItem.first().addClass(activeClass);
// 	$tabContents.not(':first').hide();
	
// 		var target = $("#tab02").attr('href');

		
// 		$tabSelect.val(target);
// 		$tabContents.hide();
// 		$(target).show();
		
	
}
</script>
<script type="text/javascript"
	th:src="@{/js/src/jquery.dataTables.yadcf.js}"></script>
<script type="text/javascript" th:src="@{/js/nhspdd/home.js}"></script>
<script type="text/javascript" th:src="@{/js/src/bootstrap.min.js}"></script>
</html>